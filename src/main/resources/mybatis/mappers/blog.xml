<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="blog">

	<!--블로그 정보 불러오기 -->
	<select id="blogList" parameterType="String"
	resultType="com.javaex.vo.BlogVo">
	<![CDATA[
	SELECT b.id,b.blogtitle as "blogTitle",b.logofile,u.username as"userName"
	FROM blog b,users u
	where b.id = u.id
	and b.id = #{id}	
	]]>
	</select>


	<!--블로그 정보 갱신 -->
	<update id="update" parameterType="com.javaex.vo.BlogVo">
	<![CDATA[
	UPDATE blog
	SET blogtitle = #{blogTitle},
	    logofile = #{logoFile}
	WHERE id = #{id}
	]]>
	</update>
	


	<!--카테고리 정보 불러오기 -->
	<select id="cateList" parameterType="String"
	resultType="com.javaex.vo.CategoryVo">
	<![CDATA[
	SELECT cate.cateno as "cateNo",cate.catename as "cateName",caca.catecount as "cateCount",
	       cate.description as "description"
	FROM category cate,(SELECT c.cateno,count(p.cateno) cateCount
                    FROM category c left outer join post p
                    on c.cateno = p.cateno
                    GROUP by c.cateno) caca
	where cate.cateno = caca.cateno
	and cate.id = #{id}
	ORDER by cate.cateno DESC
	]]>
	</select>
	
	
	
	
</mapper>